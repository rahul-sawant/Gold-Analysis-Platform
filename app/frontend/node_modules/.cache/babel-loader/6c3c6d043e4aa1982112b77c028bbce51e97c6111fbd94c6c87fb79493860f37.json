{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Container,Alert,Spinner}from'react-bootstrap';import{useNavigate,useLocation}from'react-router-dom';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ZerodhaAuth=()=>{const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[success,setSuccess]=useState(false);const navigate=useNavigate();const location=useLocation();useEffect(()=>{const handleAuth=async()=>{try{// Get the request token from URL\nconst params=new URLSearchParams(location.search);const requestToken=params.get('request_token');if(!requestToken){setError('No request token found in the URL. Authentication failed.');setLoading(false);return;}// Send the request token to the backend\nawait api.zerodhaCallback(requestToken);setSuccess(true);setLoading(false);// Redirect to trading page after a short delay\nsetTimeout(()=>{navigate('/trading');},3000);}catch(err){console.error('Zerodha authentication error:',err);setError('Failed to authenticate with Zerodha. Please try again later.');setLoading(false);}};handleAuth();},[location,navigate]);return/*#__PURE__*/_jsxs(Container,{className:\"text-center mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Zerodha Authentication\"}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"my-5\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"warning\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:\"Processing authentication with Zerodha...\"})]}),error&&/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",className:\"my-4\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"Authentication Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/trading'),className:\"btn btn-outline-danger\",children:\"Return to Trading\"})})]}),success&&/*#__PURE__*/_jsxs(Alert,{variant:\"success\",className:\"my-4\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"Authentication Successful!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You have successfully authenticated with Zerodha.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You will be redirected to the trading dashboard in a few seconds...\"})]})]});};export default ZerodhaAuth;","map":{"version":3,"names":["React","useEffect","useState","Container","Alert","Spinner","useNavigate","useLocation","api","jsx","_jsx","jsxs","_jsxs","ZerodhaAuth","loading","setLoading","error","setError","success","setSuccess","navigate","location","handleAuth","params","URLSearchParams","search","requestToken","get","zerodhaCallback","setTimeout","err","console","className","children","animation","variant","Heading","onClick"],"sources":["/Users/rahulsawant/Documents/Projects/goldpredict/Gold Analysis Platform/app/frontend/src/pages/ZerodhaAuth.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Container, Alert, Spinner } from 'react-bootstrap';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport api from '../services/api';\n\nconst ZerodhaAuth = () => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    const handleAuth = async () => {\n      try {\n        // Get the request token from URL\n        const params = new URLSearchParams(location.search);\n        const requestToken = params.get('request_token');\n        \n        if (!requestToken) {\n          setError('No request token found in the URL. Authentication failed.');\n          setLoading(false);\n          return;\n        }\n        \n        // Send the request token to the backend\n        await api.zerodhaCallback(requestToken);\n        \n        setSuccess(true);\n        setLoading(false);\n        \n        // Redirect to trading page after a short delay\n        setTimeout(() => {\n          navigate('/trading');\n        }, 3000);\n      } catch (err) {\n        console.error('Zerodha authentication error:', err);\n        setError('Failed to authenticate with Zerodha. Please try again later.');\n        setLoading(false);\n      }\n    };\n\n    handleAuth();\n  }, [location, navigate]);\n\n  return (\n    <Container className=\"text-center mt-5\">\n      <h1 className=\"page-title\">Zerodha Authentication</h1>\n      \n      {loading && (\n        <div className=\"my-5\">\n          <Spinner animation=\"border\" variant=\"warning\" />\n          <p className=\"mt-3\">Processing authentication with Zerodha...</p>\n        </div>\n      )}\n      \n      {error && (\n        <Alert variant=\"danger\" className=\"my-4\">\n          <Alert.Heading>Authentication Error</Alert.Heading>\n          <p>{error}</p>\n          <hr />\n          <div className=\"d-flex justify-content-end\">\n            <button \n              onClick={() => navigate('/trading')} \n              className=\"btn btn-outline-danger\"\n            >\n              Return to Trading\n            </button>\n          </div>\n        </Alert>\n      )}\n      \n      {success && (\n        <Alert variant=\"success\" className=\"my-4\">\n          <Alert.Heading>Authentication Successful!</Alert.Heading>\n          <p>You have successfully authenticated with Zerodha.</p>\n          <p>You will be redirected to the trading dashboard in a few seconds...</p>\n        </Alert>\n      )}\n    </Container>\n  );\n};\n\nexport default ZerodhaAuth; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}